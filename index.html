<html>
<head>
<script type="text/javascript" src="https://raw.github.com/mikeemoo/JsNeuralNet/master/neural-network.js"></script>
<script type="text/javascript" src="https://raw.github.com/mikeemoo/JsNeuralNet/master/neuron-layer.js"></script>
<script type="text/javascript" src="https://raw.github.com/mikeemoo/JsNeuralNet/master/neuron.js"></script>
<script type="text/javascript" src="https://raw.github.com/mikeemoo/JsNeuralNet/master/genome.js"></script>
<script type="text/javascript" src="https://raw.github.com/mikeemoo/JsNeuralNet/master/ant.js"></script>
<script type="text/javascript" src="https://raw.github.com/mikeemoo/JsNeuralNet/master/arena.js"></script>
<script type="text/javascript" src="https://raw.github.com/mikeemoo/JsNeuralNet/master/renderer.js"></script>
<script type="text/javascript">
var ants = [];
var stillActive = true;
var arena = new Arena();
var display_ant;
var genome;
var renderer;

function init(){

	var cont = document.getElementById('minimapcontainer');
	renderer = new Renderer(cont, arena);

	// plus a bunch of other ants..
	for (var i=0; i<100; i++){
		ants.push(new Ant(new NeuralNetwork(6, 1, 1), renderer));
	}

	//.. and a genome!
	genome = new Genome(ants, ants[0].brain.weightCount(), 0.01, 0.1);

	update();
}

function update(){

	if (stillActive){
		stillActive = false;
		renderer.resetMiniMap();
		for (var i=0; i<ants.length; i++){
			var ant = ants[i];
			if (ant.active){
				ant.update(arena);
				if (ant.active){
					stillActive = true;
				}
			}
		}
	} else {
		genome.epoch();
		for (var i=0; i<ants.length; i++){
			ants[i].reset();
		}
		stillActive = true;
	}

	setTimeout(update, 1);
}
</script>
</head>
<body onload="init()">
<div id="minimapcontainer">
</div>
</body>
</html>